<div class="modal" tabindex="-1" role="dialog" id="AddRoomModal">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header bg-danger">
        <h5 class="modal-title" style="color:#FF6600; text-transform:uppercase;">Tạo mới phòng thi trực tuyến</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-xs-6">
            <select class="form-control" id="subjects">

            </select>
          </div>
          <div class="col-xs-4">
            <div class="form-group">
              <div class='input-group date' id='started_time'>
                 <input type='text' class="form-control" />
                 <span class="input-group-addon">
                 <span class="glyphicon glyphicon-calendar"></span>
                 </span>
              </div>
           </div>
          </div>
          <div class="col-xs-2">
            <button type="button" class="btn btn-success" id="btnCreatNewRoom">Tạo phòng</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.17.47/css/bootstrap-datetimepicker.min.css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.12.0/moment.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.17.47/js/bootstrap-datetimepicker.min.js"></script>


<script type="text/javascript">
  $(document).ready(function(){
    $.ajax({
      url:'/admin/subject/list-all',
      type:'get',
      success:function(data){
        if(data.code == 200){
          let subjects = '';
          $.each(data.subjects,function(k,v){
            subjects += '<option value="'+v._id+'">'+v.name+'</option>';
          });
          $('#subjects').append(subjects);
        }
      }
    });

    $(function () {
        $('#started_time').datetimepicker({
          timeZone: 'Europe/Rome',
        format: 'D/MM/YYYY',
        locale: 'it'
        });
    });
  });


  $('#btnCreatNewRoom').click(function(){
    let subject_id = $( "#subjects option:selected" ).val();
    $.ajax({
      url:'/live/create',
      type:'post',
      data:{
        id:subject_id
      },
      success:function(data){
        if(data.code == 200){
          alert(data.msg);
          socket.emit('add-room');
          $('#AddRoomModal').modal('hide');
        }
      }
    });
  });
</script>
