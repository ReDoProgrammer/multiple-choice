<div class="panel-info">
  <div class="panel-heading">
  <h1 style="font-size:17px; padding:5px; text-transform:uppercase; color:#fff; margin:5px; text-align:right;">Danh sách phòng thi online</h1>
  </div>
  <!-- /.card-header -->
  <div class="card-body" style="margin-top:10px;">
    <table class="table table-bordered table-warning table-striped ">
      <thead>
        <tr>
          <th>Phòng</th>
          <th>Môn thi</th>
          <th>Members</th>
          <th style="width: 40px"></th>
        </tr>
      </thead>
      <tbody id="roomslist">

      </tbody>
    </table>
  </div>
  <!-- /.card-body -->
</div>

<script type="text/javascript">
  $(document).ready(function(){
    LoadRooms();
    $(document).on('click',"input[name='join']",function() {
      let room_id = $(this).closest("tr").attr('id');
      $.ajax({
        url:'/live/check-login',
        type:'get',
        success:function(data){
          if(data.code == 200){
            candidate = {
              user:data.user,
              room:room_id
            };
            console.log(candidate);
            socket.emit('new-candidate-join',)
          }else{
            alert('Bạn phải đăng nhập mới tham gia phòng thi được!')
          }
        }
      });
    });
  });

  function LoadRooms(){
    $('#roomslist').empty();
    let rooms = '<tr id = "room-001">';
    rooms+= '<td>0001</td>';
    rooms+=   '<td style="font-weight:bold; color:#FF6600">Luật cán bộ công chức</td>';
    rooms+=   '<td id="current_members">00</td>';
    rooms+=   '<td>'
    rooms+=   '<input type="button" name="join" value="Join" class="btn btn-sm btn-warning">';
    rooms+=   '</td>';
    rooms+= '</tr>';
    $('#roomslist').append(rooms);
  }


</script>
