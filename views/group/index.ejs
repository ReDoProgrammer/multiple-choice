<div class="card">
  <div class="card-header">
    <div class="form-inline">
      <label class="col-sm2">Tên lớp</label>
      <input type="text" name="" class="ml-1 col-sm-3 form-control" placeholder="Tên lớp" id="txtClassName">
      <label class="ml-1 col-sm-2">Thẻ meta</label>
      <input type="text" name="" class="form-control col-sm-3" placeholder="Thẻ meta của lớp, không dấu, ngăn cách nhau bởi kí tự -" id="txtClassMeta">
      <button type="button" class="col-sm-2 btn btn-success ml-1" id="btnSave"><i class="fas fa-save"></i> Lưu</button>
    </div>
  </div>
  <!-- /.card-header -->
  <div class="card-body p-0">
    <table class="table table-sm">
      <thead>
        <tr>
          <th style="width: 10px">#</th>
          <th>Tên lớp</th>
          <th>Thẻ meta</th>
          <th style="width: 40px">Label</th>
        </tr>
      </thead>
      <tbody id="tblData">
      </tbody>
    </table>
  </div>
  <!-- /.card-body -->
</div>

<script type="text/javascript">
  $(document).ready(function(){
    LoadData();
  });

  $('#btnSave').click(function(){
      let name = $('#txtClassName').val().trim();
      let meta = $('#txtClassMeta').val().trim();
      if(name.length == 0 || meta.length == 0){
        alert('Vui lòng nhập đủ thông tin');
        return;
      }

      $.ajax({
        url:'/admin/group/create',
        type:'post',
        data:{
          name:name,
          meta:meta
        },
        success:function(data){
          if(data.code==200){
            LoadData();
            $('#txtClassName').val('');
            $('#txtClassMeta').val('');
          }
        }
      })
  });

  function LoadData(){
    $.ajax({
      url:'/admin/group/list',
      type:'get',
      success:function(data){
        if(data.code == 200){
          $('#tblData').empty();
          let d = '';
          let idx = 1;
          $.each(data.classes,function(k,r){
            d += '<tr>';
            d +=  '<td>'+(idx++)+'</td>';
            d +=  '<td>'+r.name+'</td>';
            d +=  '<td>'+r.meta+'</td>';
            d += '<td><span class="badge bg-danger">Update</span></td>'
            d += '</tr>';
          });
          $('#tblData').append(d);
        }
      }
    })
  };

</script>
